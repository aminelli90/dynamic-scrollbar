(function(e){e.fn.dynamicScrollBar=function(t){var n=e.extend({},e.fn.dynamicScrollBar.defaults,t);var r=[];return this.each(function(){console.log(this);$this=e(this);var t=$this;var i=$this.find(n.scrollableContent);var s=e("<div>").addClass(n.scrollBarClass).css(n.style).width(t.width()).hide().append(e("<div>").width(i.width()).html("&nbsp;"));s.scroll(function(){t.scrollLeft(e(this).scrollLeft())});r.push({myScrollBar:s,contenuto:i,contenitore:t});t.append(s);var o=e(window).scrollTop()+e(window).height();var u=t.position().top;var a=t.height();if(o>u+100&&o<u+a){s.find("div").width(i.width());s.fadeIn(20);s.scrollLeft(t.scrollLeft())}else{s.fadeOut(20)}e(window).scroll(function(){var t=e(window).scrollTop()+e(window).height();e.each(r,function(e,n){var r=n.contenitore.position().top;var i=n.contenitore.height();if(t>r+100&&t<r+i){n.myScrollBar.find("div").width(n.contenuto.width());n.myScrollBar.fadeIn(20);n.myScrollBar.scrollLeft(n.contenitore.scrollLeft())}else{n.myScrollBar.fadeOut(20)}})})})};e.fn.dynamicScrollBar.defaults={scrollableContent:"table",scrollBarClass:"",style:{bottom:"0",height:"17px",overflow:"scroll",position:"fixed"}}})(jQuery)
